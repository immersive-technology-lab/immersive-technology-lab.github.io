<!doctype html>
<html lang="en">
<head>
	<title>Neural Bokeh: Learning Lens Blur for Computational Videography and Out-of-Focus Mixed Reality</title>
	
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, minimum-scale=1.0">
	<meta name="description" content="Neural Bokeh: Learning Lens Blur for Computational Videography and Out-of-Focus Mixed Reality is an VR Conference Paper.">
	<meta name="keywords" content="immersive technology lab, tugraz, ISMAR">
	<meta name="author" content="Immersive Technology Lab, TUGraz">

	<!-- Bootstrap v5.1.3 CSS and JS (https://getbootstrap.com/) -->
	<link href="../../common/bootstrap-5.1.3-dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="../../common/bootstrap-5.1.3-dist/js/bootstrap.bundle.min.js"></script>
	
	<!-- definitive-image-comparison-slider by Abel Cabeza Román (https://github.com/abelcabezaroman/definitive-image-comparison-slider) -->
	<link rel="stylesheet" href="../../common/definitive-image-comparison-slider/dics.css">
	<script src="../../common/definitive-image-comparison-slider/dics.js"></script>
	<script src="assets/js/BeforeAfter.js"></script> <!-- Change this to modify the effect -->

	<!-- custom fonts -->
	<link rel="stylesheet" href="../../common/fonts/latofonts.css">
	<link rel="stylesheet" href="css/fonts.css">
</head>

<body>
<!-- Begin page content -->
<main>
	<section class="hero-banner bg-dark bg-opacity-10 pt-1 pb-4">
	<div class="container text-center">
		<!-- Title and a note -->
		<h1 class="mt-4"><strong>Neural Bokeh</strong>: Learning Lens Blur for Computational Videography and Out-of-Focus Mixed Reality</h1>
		<h5 class="text-black-50"><i>Conference paper at IEEE VR 2024</i></h5>

		<!-- Author info. Tips: https://getbootstrap.com/docs/5.0/layout/grid/ -->
		<div class="mt-4">
			<div class="row">
				<div class="col">
					<a class="lead link-dark text-decoration-none">David Mandl<sup>1</sup></a>,
					<a class="lead link-dark text-decoration-none">Shohei Mori<sup>1</sup></a>,
					<a class="lead link-dark text-decoration-none">Peter Mohr<sup>1</sup></a>,
					<a class="lead link-dark text-decoration-none">Yifan Peng<sup>2</sup></a>,</br>
					<a class="lead link-dark text-decoration-none">Tobias Langlotz<sup>3</sup></a>,
					<a class="lead link-dark text-decoration-none">Dieter Schmalstieg<sup>4,1</sup></a>,
					<a class="lead link-dark text-decoration-none">Denis Kalkofen<sup>5,1</sup></a>
				</div>
			</div>
			<div class="row">
				<div class="col">
					<div class="mt-n1"><sup>1</sup>Graz University of Technology, <sup>2</sup>The University of Hong Kong, <sup>3</sup>University of Otago, <sup>4</sup>University of Stuttgart, <sup>5</sup>Flinders University</div>
				</div>
			</div>
		</div>
	</div>
	</section>

	<section class="hero-banner bg-white shadow-lg shadow pt-4 pb-4">
	<div class="container text-center">
		<!-- Teaser image -->
		<div class="mb-2">
			<div class="row">
			<img src="assets/img/teaser.jpg" class="img-fluid" alt="Teaser image">
			</div>
		</div>


		<!-- Content icons -->
		<!-- Bootstrap icons v.1.8.1 (https://icons.getbootstrap.com/) -->
		<div class="mt-5">
			<div class="row mb-3">
				<div class="col">
					<figure class="figure"><a class="text-decoration-none" href="" target="_blank">
						<img src="../../common/icons-1.8.1/link-45deg.svg" alt="Link to IEEE Xplore" width="70" height="70" title="IEEE Xplore">
						<figcaption class="figure-caption mt-1"><b>Xplore&nbsp;(TBA)</b></figcaption>
					</a></figure>
				</div>
				<div class="col">
					<figure class="figure"><a class="text-decoration-none" href="assets/vr24_mandl_paper.pdf" target="_blank">
						<img src="../../common/icons-1.8.1/file-earmark-text.svg" alt="Link to Paper" width="80" height="80" title="Paper">
						<figcaption class="figure-caption mt-1"><b>Preprint</b></figcaption>
					</a></figure>
				</div>
				<div class="col">
					<figure class="figure"><a class="text-decoration-none" href="" target="_blank">
						<img src="../../common/icons-1.8.1/folder2.svg" alt="Link to Paper" width="80" height="80" title="Data">
						<figcaption class="figure-caption mt-1"><b>Data&nbsp;(TBA)</b></figcaption>
					</a></figure>
				</div>
				<div class="col">
					<figure class="figure"><a class="text-decoration-none" href="https://youtu.be/A8z142aqaPI" target="_blank">
						<img src="../../common/icons-1.8.1/file-earmark-play-fill.svg" alt="Link to Technical Video" width="70" height="70" title="Video">
						<figcaption class="figure-caption mt-1"><b>Video</b></figcaption>
					</a></figure>
				</div>
			</div>
		</div>
		

		<!-- custom h line -->
		<hr style="margin: 0 25% 1rem 25%;">
		

		<!-- Abstract -->
		<h3 class="my-5">Abstract</h3>
		<p class="mb-5 text-start">
		We present Neural Bokeh, a deep learning approach for synthesizing convincing out-of-focus effects with applications in Mixed Reality (MR) image and video compositing. Unlike existing approaches that solely learn the amount of blur for out-of-focus areas, our approach captures the overall characteristic of the bokeh to enable the seamless integration of rendered scene content into real image, ensuring a consistent lens blur over the resulting MR composition. Our method learns spatially varying blur shapes, from a dataset of real images acquired using the physical camera that is used to capture the photograph or video of the MR composition. Accordingly, those learned blur shapes mimic the characteristics of the physical lens. As the run-time and the resulting quality of Neural Bokeh increase with the resolution of input images, we employ low-resolution images for the MR view finding at runtime and high-resolution renderings for compositing with high-resolution photographs or videos in an offline process. We envision a variety of applications, including visual enhancement of image and video compositing containing creative utilization of out-of-focus effects.
		</p>
	

		<!-- custom h line -->
		<hr style="margin: 0 25% 1em 25%;">
		

		<!-- Results -->
		<h3 class="my-5">Example Results</h3>

		<script>
		function OnChangeCamera(selectedObject)
		{
			var cam = selectedObject.value;
			var id = selectedObject.id;
			//const imageIDs = ["18", "84", "152", "161", "218", "283", "511", "873", "1335", "1429"];
			
			var prefix = "ebb";
			var imgID = prefix + id;
			var blurImg = document.getElementById(imgID);
			var srcPrefix = "assets/img/ebb/";
			var newSrc = srcPrefix + cam + "/" + id + ".jpg";
			//console.log(newSrc);
			blurImg.setAttribute('src', newSrc);
		}
		</script>
				
		<div class="row my">
			<div class="col-lg-6 mb-1">
				<p class="mb-1 text-start">Select camera
				<select name="cameras" id="18", onchange="OnChangeCamera(this)">
					<option value="D3300">Nikon D3300</option>
					<option value="Z6">Nikon Z6</option>
				</select>
				</p>
				<div class="b-dics">
					<img class="img-fluid" src="assets/img/ebb/sharp/18.jpg">
					<img class="img-fluid" src="assets/img/ebb/D3300/18.jpg" id="ebb18">
				</div>
			</div>
			<div class="col-lg-6 mb-3">
				<p class="mb-1 text-start">Select camera
				<select name="cameras" id="84", onchange="OnChangeCamera(this)">
					<option value="D3300">Nikon D3300</option>
					<option value="Z6">Nikon Z6</option>
				</select>
				</p>
				<div class="b-dics">
					<img class="img-fluid" src="assets/img/ebb/sharp/84.jpg">
					<img class="img-fluid" src="assets/img/ebb/D3300/84.jpg" id="ebb84">
				</div>
			</div>
			<div class="col-lg-6 mb-1">
				<p class="mb-1 text-start">Select camera
				<select name="cameras" id="152", onchange="OnChangeCamera(this)">
					<option value="D3300">Nikon D3300</option>
					<option value="Z6">Nikon Z6</option>
				</select>
				</p>
				<div class="b-dics">
					<img class="img-fluid" src="assets/img/ebb/sharp/152.jpg">
					<img class="img-fluid" src="assets/img/ebb/D3300/152.jpg" id="ebb152">
				</div>
			</div>
			<div class="col-lg-6 mb-3">
				<p class="mb-1 text-start">Select camera
				<select name="cameras" id="161", onchange="OnChangeCamera(this)">
					<option value="D3300">Nikon D3300</option>
					<option value="Z6">Nikon Z6</option>
				</select>
				</p>
				<div class="b-dics">
					<img class="img-fluid" src="assets/img/ebb/sharp/161.jpg">
					<img class="img-fluid" src="assets/img/ebb/D3300/161.jpg" id="ebb161">
				</div>
			</div>
			<div class="col-lg-6 mb-1">
				<p class="mb-1 text-start">Select camera
				<select name="cameras" id="218", onchange="OnChangeCamera(this)">
					<option value="D3300">Nikon D3300</option>
					<option value="Z6">Nikon Z6</option>
				</select>
				</p>
				<div class="b-dics">
					<img class="img-fluid" src="assets/img/ebb/sharp/218.jpg">
					<img class="img-fluid" src="assets/img/ebb/D3300/218.jpg" id="ebb218">
				</div>
			</div>
			<div class="col-lg-6 mb-3">
				<p class="mb-1 text-start">Select camera
				<select name="cameras" id="283", onchange="OnChangeCamera(this)">
					<option value="D3300">Nikon D3300</option>
					<option value="Z6">Nikon Z6</option>
				</select>
				</p>
				<div class="b-dics">
					<img class="img-fluid" src="assets/img/ebb/sharp/283.jpg">
					<img class="img-fluid" src="assets/img/ebb/D3300/283.jpg" id="ebb283">
				</div>
			</div>
			<div class="col-lg-6 mb-1">
				<p class="mb-1 text-start">Select camera
				<select name="cameras" id="511", onchange="OnChangeCamera(this)">
					<option value="D3300">Nikon D3300</option>
					<option value="Z6">Nikon Z6</option>
				</select>
				</p>
				<div class="b-dics">
					<img class="img-fluid" src="assets/img/ebb/sharp/511.jpg">
					<img class="img-fluid" src="assets/img/ebb/D3300/511.jpg" id="ebb511">
				</div>
			</div>
			<div class="col-lg-6 mb-3">
				<p class="mb-1 text-start">Select camera
				<select name="cameras" id="873", onchange="OnChangeCamera(this)">
					<option value="D3300">Nikon D3300</option>
					<option value="Z6">Nikon Z6</option>
				</select>
				</p>
				<div class="b-dics">
					<img class="img-fluid" src="assets/img/ebb/sharp/873.jpg">
					<img class="img-fluid" src="assets/img/ebb/D3300/873.jpg" id="ebb873">
				</div>
			</div>
			<div class="col-lg-6 mb-1">
				<p class="mb-1 text-start">Select camera
				<select name="cameras" id="1335", onchange="OnChangeCamera(this)">
					<option value="D3300">Nikon D3300</option>
					<option value="Z6">Nikon Z6</option>
				</select>
				</p>
				<div class="b-dics">
					<img class="img-fluid" src="assets/img/ebb/sharp/1335.jpg">
					<img class="img-fluid" src="assets/img/ebb/D3300/1335.jpg" id="ebb1335">
				</div>
			</div>
			<div class="col-lg-6 mb-3">
				<p class="mb-1 text-start">Select camera
				<select name="cameras" id="1429", onchange="OnChangeCamera(this)">
					<option value="D3300">Nikon D3300</option>
					<option value="Z6">Nikon Z6</option>
				</select>
				</p>
				<div class="b-dics">
					<img class="img-fluid" src="assets/img/ebb/sharp/1429.jpg">
					<img class="img-fluid" src="assets/img/ebb/D3300/1429.jpg" id="ebb1429">
				</div>
			</div>
		</div>
		
		<p class="mt-2 text-start">
		These examples show the output of our system when applied to all-in-focus images. The depth here is computed using <a href="https://github.com/isl-org/DPT">DPT</a>. Use the box to select which camera model should be applied.
		</p>
		
		<!-- custom h line -->
		<hr style="margin: 0 25% 1em 25%;">
		
				<!-- Results -->
		<h3 class="my-5">Refocusing</h3>
				
		<script>
		function OnFocusChange(selectedObject)
		{
			var focus = selectedObject.value;
			if(focus.length == 1)
				focus = "0" + focus;
			var cam = document.getElementById("focuscamera").value;
			var img = document.getElementById("refocusing");
			var srcPrefix = "assets/img/refocusing/";
			var newSrc = srcPrefix + cam + "/" + focus + ".jpg";
			img.setAttribute('src', newSrc);
		}
		function OnCameraChange(selectedObject)
		{
			var cam = selectedObject.value;
			var focus = document.getElementById("focusslider").value;
			if(focus.length == 1)
				focus = "0" + focus;
			var img = document.getElementById("refocusing");
			var srcPrefix = "assets/img/refocusing/";
			var newSrc = srcPrefix + cam + "/" + focus + ".jpg";
			img.setAttribute('src', newSrc);
		}
		</script>
		
		<div class="row my">
			<div class="col mb-1">
				<div class="b-dics">
					<img src="assets/img/refocusing/D3300/01.jpg" id="refocusing">
				</div>
			</div>
		</div>
		
		<div class="refocusing">
			<p class="mb-1 text-start">Select camera
			<select name="cameras", id="focuscamera" onchange="OnCameraChange(this)">
				<option value="D3300">Nikon D3300</option>
				<option value="Z6">Nikon Z6</option>
			</select>
			</p>
			<p class="mb-1 text-start">Focus distance
			<input type="range" min="1" max="30" value="1" class="slider" id="focusslider", oninput="OnFocusChange(this)">
			</p>
		</div>
		
		<p class="mt-2 text-start">
		This examples shows a focus sweep applied to an all-in-focus image. The depth of field is computed using the selected camera model.
		</p>
		
		<!-- custom h line -->
		<hr style="margin: 0 25% 1em 25%;">
		
		<h3 class="my-5">Compositing</h3>
		
		<div class="row" id="video_background">
			<video id="animation" style="display: initial;" controls>
				<source src="assets/carousel.mp4" type="video/mp4">
				<p>Your user agent does not support the HTML5 Video element.</p>
			</video>
		</div>
		
		<p class="mt-2 text-start">
		This example shows a rendered carousel that is blurred using our system. The result is that added to an image of the camera that our system has been trained for. Notice how the animated highlights of the carousel change depending on the position in the image.
		</p>
		
		<!-- custom h line -->
		<hr style="margin: 0 25% 1em 25%;">

		<!-- Applications -->
		<h3 class="mt-5 mb-3">Related Projects</h3>
		<div class="container">
			<div class="row mt-5">
				<div class="col-lg-2 col-md-4">
					<img src="../../assets/images/selected/ebner_vr23.jpg" class="img-fluid" style="width:100%;" alt="ebner_vr23.jpg">
				</div>
				<div class="col-lg-10 col-md-8">
					<p class="text-start">
						<a class="text-decoration-none" href="../fs2mpi/index.html" target="_blank"><strong>Off-Axis Layered Displays: Hybrid Direct-View/Near-Eye Mixed Reality with Focus Cues</strong></a>
						<br>
						This work introduces off-axis layered displays, the first approach to stereoscopic direct-view displays with support for focus cues. Off-axis layered displays combine a head-mounted display with a traditional direct-view display for encoding a focal stack and thus, for providing focus cues. 
					</p>
				</div>
			</div>
			<div class="row mt-2">
				<div class="col-lg-2 col-md-4">
					<img src="../../assets/images/selected/ebner_vr22.jpg" class="img-fluid" style="width:100%;" alt="ebner_vr22.jpg">
				</div>
				<div class="col-lg-10 col-md-8">
					<p class="text-start">
						<a class="text-decoration-none" href="../gazecontingentvst/index.html" target="_blank"><strong>Video See-Through Mixed Reality with Focus Cues</strong></a>
						<br>
						This work introduces the first approach to video see-through mixed reality with full support for focus cues. By combining the flexibility to adjust the focal distance found in varifocal designs with the robustness to eye-tracking error found in multifocal designs, our novel display architecture reliably delivers focus cues over a large workspace. 
					</p>
				</div>
			</div>
			<div class="row mt-2">
				<div class="col-lg-2 col-md-4">
					<img src="../../assets/images/selected/mandl_ismar21.jpg" class="img-fluid" style="width:100%;" alt="mandl_ismar21.jpg">
				</div>
				<div class="col-lg-10 col-md-8">
					<p class="text-start">
						<a class="text-decoration-none" href="../neuralcameras/index.html" target="_blank"><strong>Neural Cameras: Learning Camera Characteristics for Coherent Mixed Reality Rendering</strong></a>
						<br>
						Coherent rendering is important for generating plausible Mixed Reality presentations of virtual objects within a user’s real-world environment. While existing approaches either focus on a specific camera or a specific component of the imaging system, we introduce Neural Cameras, the first approach that jointly simulates all major components of an arbitrary modern camera using neural networks.
					</p>
				</div>
			</div>
		</div>
		
		<!-- custom h line -->
		<hr style="margin: 1em 25% 1em 25%;">

		<!-- Citation -->
		<h3 class="my-5">Citation 
			<button type="button" class="btn btn-outline-secondary btn-sm" data-bs-container="body" data-bs-toggle="popover" data-bs-placement="top" data-bs-content="Copied!" onclick="CopyToClipboard('bib')">
			Copy
			</button>
		</h3>
		<div class="col text-start bg-dark bg-opacity-10 rounded-3 px-3">
		<pre><code id="bib">
@inproceedings{Mandl2024NeuralBokeh, 
	author={Mandl, David and Mori, Shohei and Mohr, Peter and Peng, Yifan and Langlotz, Tobias and Schmalstieg, Dieter and Kalkofen, Denis},
	booktitle={2024 IEEE Conference on Virtual Reality and 3D User Interfaces (VR)}, 
	title={Neural Bokeh: Learning Lens Blur for Computational Videography and Out-of-Focus Mixed Reality}, 
	year={2024},
}
		</code></pre>
		</div>

		<script src="../common/copy-to-clipboard-js/CopyToClipboard.js"></script>
		<script src="../common/copy-to-clipboard-js/Popover.js"></script>
	</div>
	</section>


	<section class="hero-banner bg-dark bg-opacity-10 pt-1 pb-4">
	<div class="container">
		<div class="row mt-5">
			<div class="col-5">
				<h3>Links</h3>
				<ul>
					<li><a class="link-dark text-decoration-none" href="https://immersive-technology-lab.github.io/" target="_blank">Immersive Technology Lab (TUGraz)</a></li>
				</ul>
			</div>
		</div>
	</div>
	</section>

</main>
</body>
</html>